---
title: Git入门(视频)
date: 2020-10-13 23:20:40
tags: Git
categories: Git
---

(注1：一个Git和Github从去年11月到现在，已经快过去了一年了，我也是服了，到现在也还不熟悉。不过今时不同往日，随着时间的推移，我的水平提升了，现在这个时候再来开始系统学Git和Github我感觉已经完全没有什么问题了，之前抄了一段时间的文章，发现效果不佳，于是还是准备去看一些视频。)

(注2：网上随便搜了搜，视频还是挺丰富的，找了几个还不错的，本篇博文就作为视频笔记了。)

[看故事学Git--就看这个了](https://www.bilibili.com/video/BV1pD4y1m7bX?p=1)

[尚硅谷Git教程全套完整版（12h深入掌握git-没看）](https://www.bilibili.com/video/BV15J411973T?p=1)

[尚硅谷GitHub基础全套完整版教程-没看](https://www.bilibili.com/video/BV1pW411A7a5?p=1)

# 第1章：快速入门

## Git是什么

Git是一个分布式的版本控制软件。

* 软件，类似于QQ、office，DOTA等安装到电脑上才能使用的工具。
* 版本控制，类似于毕业论文、写文案、视频剪辑等，需要反复修改和保留原历史数据。
* 分布式
  * 文件夹拷贝
  * 本地版本控制
  * 集中式版本控制
  * 分布式版本控制

![](Git入门-视频/01.png)

## 为什么要做版本控制

要保留之前所有的版本，以便回滚和修改。

## 安装Git

Git这个软件是装在你自己的电脑上的，并且只能完成你自己电脑上的版本控制。

**中心**不需要安装Git软件。(你可以把中心当成是代码托管的仓库)这个仓库现在还没有呢，如果想有，还得借助Github或Gitlab网站，要联网。

我们这里讲的是不联网的，只是在本地做版本控制，还不能提交到代码仓库呢。

![](Git入门-视频/02.png)

[安装 Git](https://git-scm.com/book/zh/v2/%E8%B5%B7%E6%AD%A5-%E5%AE%89%E8%A3%85-Git)

# 第2章："东北热"创业史

## 第一阶段：单枪匹马开始干

新建一个`dbhot`文件夹，让Git帮我们对其进行管理。

> `dbhot`文件夹是教室里的学生，Git是老师，老师要管理学生,首先要进入教室，然后老师要对学生进行统一洗脑(初始化)，洗脑成功后Git就成了教室里的老大了，每个学生都要听他的话了。最后再看一下同学们的当前状态怎么样。

想要让git对一个目录进行版本控制需要以下步骤：

* 进入要管理的文件夹

* 执行初始化命令

  ~~~node
  git init
  ~~~

执行初始化命令后要管理的`dbhot`文件夹里面会出现一个默认隐藏的`.git`文件夹，今后所有的配置及版本信息都会存储到这个`.git`文件夹里面，所以你最好不要随便动里面的东西。

![](Git入门-视频/04.png)

![](Git入门-视频/03.png)

* 管理目录下的文件状态

  ~~~node
  git status
  注：新增的文件和修改过后的文件都是红色
  ~~~

  ![](Git入门-视频/05.png)

  如果再往dbhot文件夹下再新增一个`test.txt`文件，再执行`git status`命令，新增的文件也能检测到：

  ![](Git入门-视频/06.png)

  > `git status`就是用于检测当前文件夹里的文件状态的。

* 管理指定文件（**红变绿**）

  ~~~node
  git add 文件名			——这是管理某一个文件名
  git add .					——这是管理所有的文件名(add和点中间有空格)
  ~~~

检测到状态之后就要对它进行管理了，就要生成版本了。

![](Git入门-视频/07.png)

![](Git入门-视频/08.png)

* 生成版本

  ~~~node
  git commit -m '描述信息'
  ~~~

这3个文件都已经被管理起来了，但是还不够，你还得让它们跳转到另外一个状态：生成一个版本。(这个就相当于V1.0版了，生成版本可以很好的记录下当前所做的的一系列操作。)

![](Git入门-视频/09.png)

* 生成版本后又对其中一个文件进行修改

对3个文件生成了一个版本后，发现`index.html`还有点问题，对它进行了一些修改，此时Git是可以检测到`index.html`发生了修改的。

![](Git入门-视频/11.png)

![](Git入门-视频/10.png)

![](Git入门-视频/12.png)

* 查看所有的版本的记录

  ~~~node
  git log
  ~~~

这里我们已经生成了2个版本了，如果查看这2个版本的记录呢？使用`git log`命令即可。

![](Git入门-视频/13.png)

* 个人信息配置：用户名、邮箱(一次即可)

  ~~~node
  git config --global user.email "you@example.com"
  git config --global user.name "Your Name"
  ~~~

当你在进行上述操作遇到错误时，可能是因为你没有进行个人信息配置导致的。

### 第一阶段小结

![](Git入门-视频/14.png)

> 看了视频后，完全能看懂了，现在头脑中开始逐渐清晰了起来，不再那么迷糊了。

### 补充：Git三大区域

![](Git入门-视频/15.png)

> 记得经常用`git status`来查看状态。

## 第二阶段：拓展新功能(正常功能)

我在`index.html`里又新增了短视频功能

![](Git入门-视频/16.png)

![](Git入门-视频/17.png)

## 第三阶段："约饭"功能(涉黄功能)

只有短视频功能的时候，营业收入只有100多万，加了"约饭"功能后，营业收入突破了1000万。

![](Git入门-视频/18.png)

![](Git入门-视频/19.png)

随着网站的运行，有关部门发现"约饭"的功能涉黄，要求整改，这个"约饭"功能不能要了，要下线才能继续运营。

我们重新改代码会非常麻烦，而用版本控制的一个好处是可以让它快速回滚到**前面**的版本状态(你想回滚到哪个状态就可以回滚到哪个状态)。

* 回滚至之前版本

  ~~~node
  git log(查看所有的版本)
  git reset --hard 版本号
  ~~~

  > 版本号就是上图中黄色的部分，commit之后的那一长串。

![](Git入门-视频/20.png)

![](Git入门-视频/21.png)

* 回滚至之后版本

后来经过贿赂有关部门，可以再重新上线"约饭"功能了。因为"约饭"功能以前写过，可以不用再重新写一遍代码了，回滚到之后的版本就可以了。

但是这次查看所有版本的时候不要用`git log`了，使用这个命令查看不到回滚之后的版本号的。

![](Git入门-视频/22.png)

这个时候应该使用`git reflog`命令查看所有版本。

~~~node
git reflog
git reset --hard 版本号
~~~

![](Git入门-视频/23.png)

> e112867 就是"约饭"功能的版本号

![](Git入门-视频/24.png)

![](Git入门-视频/25.png)

### Git命令小总结

~~~
git init
git add
git commit
git 1og
git reflog
git reset--hard版本号
~~~

![](Git入门-视频/26.png)

## 第四阶段：商城&紧急修复bug

> 加入**新增的商城功能**要写2个月，当我写到1个月的时候，发现"约饭"的功能出Bug了，需要紧急修复。
>
> 但是**我这个商城功能刚开发一半**，怎么样我**既能回到"约饭"那个版本并且我现在写的商城功能也能暂时保存一下**呢？保存在哪里呢？按照以前我们储备的只是是无法实现的，而现在可以通过"分支"功能来实现。

### 分支

分支可以给使用者提供多个环境，意味着你可以把你的工作从开发主线上分离开来，以免影响开发主线。

* 第一阶段之单枪匹马开始干：自己写了100个文件，版本为C1。
* 第二阶段之拓展新功能：修改了10个文件，新增了20个文件，版本为C2。C1和C2的区别就是修改了10个文件，新增了20个文件，剩下的90个文件都是没有发生变化的。版本C2将这不变的90个文件复制一份放到C2里面，而是只保留了修改的10个文件，新增的20个文件。这不变的90个文件自己没有保存以后自己想要怎么办呢？C2弄了一个指针指向C1，以后想要的话就可以通过指针再将这不变的90个文件给拿到了。

* 第三阶段只约饭功能：类似的也生成了一个版本C3
* 接下来我还想再版本C3的基础上进行开发，这个时候你可以顺着C1——>C2——>C3的顺序再来一个C4,也可以新建一个分支进行后续版本的开发。

![](Git入门-视频/27.png)

### 紧急修复bug方案

> 线上代码出Bug了我们可以**新建一个分支专门用于写处理Bug的代码**，等代码写完后我们可以再将这个分支合并到主分支里面去解决Bug。
>
> 默认主干线叫做:master，分支(branch)具体叫什么名字你随便取。

![](Git入门-视频/28.png)

### 命令总结

* 查看当前所在的分支

  ~~~git
  git branch
  ~~~

![](Git入门-视频/29.png)

* 创建新分支

  ~~~git
  git branch 分支名称
  ~~~

* 切换分支

  ~~~git
  git checkout 分支名称
  ~~~

*  分支合并(可能产生的冲突)

  ~~~git
  git merge 要合并的分支
  注意：先切换分支再合并
  ~~~

*  删除分支

  ~~~git
  git branch -d 分支名称
  ~~~

我们想要在新的分支下面创建一个新功能，新建一个分支dev，并且查看当前分支。然后切换到dev分支，在**dev分支下**写代码。

![](Git入门-视频/30.png)

![](Git入门-视频/31.png)

![](Git入门-视频/32.png)

![](Git入门-视频/33.png)

我们之后再切换到master分支，再看`index.html`代码，发现它又变成了C3版本的代码了。

![](Git入门-视频/34.png)

![](Git入门-视频/35.png)

如果你再切换为dev分支的话，再打开`index.html`，会发现新增的代码又回来了。说白了，dev分支里存的是C4版本，master分支里存的是C3版本。

即分支与分支之间给你做了一个**代码的隔离**。

我们再**在master分支下**新建一个bug分支，用来修复bug问题。

![](Git入门-视频/36.png)

接下来我再跳转到bug分支，在C3的基础上给它进行修改代码，调试bug。

![](Git入门-视频/38.png)

注意：修改bug分支里的代码不影响C3的。

![](Git入门-视频/37.png)

修复完bug后对代码进行提交。

![](Git入门-视频/39.png)

但是注意：bug修复完是在bug分支里修复的，版本是C5,但是master分支(版本C3)里面的bug还是没有修复的，还是有的。 

一般我们认为**master分支是线上分支，是代码正式跑在线上环境的分支**。你在bug分支上修复完bug之后，你应该把代码合并到主分支上来，这样公司线上的bug就可以被修复了。

所以接下来我们要把bug分支的代码合并到master分支上面去。

**重点：要想bug分支合并到master分支上，必须先切换回master分支！！！**

相当于你站在master分支上，把bug分支上的代码给他拉过来，合并过来。

![](Git入门-视频/40.png)

![](Git入门-视频/41.png)

bug分支合并完后就失去了利用价值，就可以把它给删掉了。

![](Git入门-视频/42.png)

修复完bug后我们应该再回到dev分支(C4版本)，把商城的功能给它开发完(前面只是开发了50%)

**注意：因为dev分支(C4版本)是从C3版本拆分而来的，所以dev分支里面的bug还没有修复呢！！！**

但是bug问题你先别管，这个分支主要是来开发新功能的，所以你只需要关注开发新功能就好了。

![](Git入门-视频/43.png)

![](Git入门-视频/44.png)

dev分支里的功能开发完毕以后，也要把它合并到master主分支上面去。

我们**首先**需要再切换到master分支，然后把dev分支合并到master分支。

但是我们合并完后发现它报错了(产生了冲突)：

![](Git入门-视频/45.png)

原因如下：

原来我们修复bug之后，对C3的代码做了一些修改生成了C5,而在商城的时候，dev分支那个版本是没有修复bug的(因为直接从主分支C3版本基础上新建的C4商城版本)，它只是开发了新功能。

而C5修复bug的代码和C4开发新功能的代码可能会产生不一样的地方，如果有不一样的地方它就会有冲突了。

产生冲突之后打开`index.html`，它就混乱了，产生了下面的这些东西：

(如果改了同一行文件，它就不知道怎么合并了，就会乱了，它会把2个文件都给你放到里面去)

![](Git入门-视频/46.png)

此时我们可以手动找到`index.html`，手动把冲突给解决掉(把`<li>约饭</li>`给删除了就好了)

修复后的`index.html`代码如下：

![](Git入门-视频/47.png)

然后再进行代码提交即可。

![](Git入门-视频/48.png)

![](Git入门-视频/28.png)

### 工作流

公司让你创建一个新项目，最最最基础的，你要先创建2个分支(master分支自动创建)：默认的**master分支**(只保留正式版本，即真实上线的版本，它里面永远是稳定的)和**dev分支**(专门用于做开发的分支，dev是development的简写)。

![](Git入门-视频/49.png)

![](Git入门-视频/50.png)

##   第五阶段：进军三里屯

> 现在的分支默认是main了，不是master了！！！但是就是我想与时俱进，把默认分支由master改成main后，就发生了一系列问题，我现在有没有能力解决，所以后面我又把默认分支改成master了。这个改成main的事情以后再说了吧。
>
> 学到这里的时候我出了一些问题了，老是报各种各样的错误了。
>
> 现在是2020年12月9日，重新弄了一个`dbhot`文件夹，重新开始弄。

[Git、GitHub、GitLab三者之间的联系以及区别](https://zhuanlan.zhihu.com/p/110274580)

有钱之后就要造呀，一个人在三里屯买了一层楼做办公室。

![](Git入门-视频/51.png)

> GitHub就类似于百度云，只不过它可以和Git做一个无缝的衔接。但是Git和GitHub二者没有任何关系，Git是一个软件，而GitHub是一个网站，是专门用于做代码托管的仓库。除了GitHub以外，还有GitLab,Coding,码云，开源中国等类似的代码托管的网站。

### 第一天上班前在家上传代码

**类似于在家上传文件到百度云。**

> push：把代码从本机上传到远程GitHub服务器
>
> pull：把代码从Github服务器下载到本机

首先，需要注册github账号，并创建远程仓库，然后再执行如下命令，将代码上传到github。

![](Git入门-视频/52.png)

~~~git
1. 给远程仓库起别名
	 git remote add origin 远程仓库地址
	 
2. 向远程推送代码
	 git push -u origin 分支
~~~

![](Git入门-视频/53.png)

> 注意，要先把分支切换到master分支，然后再顺序执行上面的这2行代码。(后来我发现好像不用刻意切换分支也行。)

![](Git入门-视频/54.png)

> 而我们本地是有`master`和`dev`2个分支的，还有个`dev`分支没有推送上去，所以还要执行`git push -u origin dev`这个代码推送一下`dev`分支。

![](Git入门-视频/55.png)

### 初次在公司新电脑下载代码

**类似于在公司下载百度云里面的文件(文件是当初在家里上传的)。**

首先在公司电脑上新建一个文件夹，我的就取名叫`dbhot-公司`，就在这个文件夹中克隆GitHub(远程仓库上的代码)

~~~shell
克隆远程仓库代码：
git clone远程仓库地址（内部已实现git remote add origin 远程仓库地址）
~~~

![](Git入门-视频/56.png)

![](Git入门-视频/57.png)

![](Git入门-视频/58.png)

> 远程仓库有2个分支，你`git clone`下来后，看似只有一个master分支，其实不是的。其实它把所有的分支都复制下来了，只不过在这里它没有帮助我们显示出来。

* 虽然你没有直接显示出来其他的分支，但是我是可以切换的

  ~~~shell
  切换分支：
  git checkout 分支
  ~~~

* 在公司下载完代码后，继续开发(不然你说你下载完代码后干什么呢？)
* 注意：接下来的操作都是在公司的电脑上完成的。

~~~shell
1. 切换到dev分支进行开发
   git checkout dev
   
2. 把master分支合并到dev[仅一次](因为此时dev分支上的代码比master少，不是最新最全的代码)
	 git merge master
	 
3. 修改代码(在公司电脑dev分支下新建一个a1.py的文件)
	 touch a1.py
	 
4. 提交代码(相当于上传到"百度云")
	git add .
	git commit -m '在公司第一天在dev分支下开发的代码'
	git push -u origin dev(-u可以省略)
~~~

> 注意：我现在是在dev分支下开发的代码(新增了`a1.py`这个文件，master分支还没有更新呢！！)

### 下班回到家继续写代码

[git 解决 fatal: 'origin' does not appear to be a git repository](https://blog.csdn.net/xiaobinqt/article/details/83546322)

~~~shell
1. 切换到dev分支进行开发
	 git checkout dev

2. 拉代码
   git pull origin dev

3. 继续开发(在家里电脑dev分支下新建一个a2.py的文件)
	 touch a2.py
	 
4. 提交代码(再次上传到"百度云")
   git add
   git commit-m'在家里半夜三更在dev分支下开发的代码'
   git push origin dev
~~~

### 到公司继续开发

~~~shell
1. 切换到dev分支进行开发(因为你在家里是在dev分支下新增了a2.py文件)
	 git checkout dev

2. 拉最新代码(不必再Clone，只需要通过pull获取最新代码即可--相当于从百度云下载最新的dev分支上的代码)
	 如果想在公司的电脑上继续开发，应该是在昨晚家里提交代码的基础上(新增了a2.py)开发的，所以第一步要获取	 最新的代码
   git pull origin dev

3. 继续开发(在公司电脑dev分支下新建一个a3.py的文件)
	 touch a3.py
	 
4. 提交代码(第3次上传到"百度云")
   git add
   git commit-m'在公司第二天在dev分支下开发的代码a3.py'
~~~

> 开发完`a3.py`后，我们就当它开发完毕了，此时不急着上传代码了，要先进行分支合并了。

### 开发完毕，要上线(公司电脑上)

~~~shell
1. 将dev分支合并到master，进行上线
   git checkout master
   git merge dev 
   git push origin master
   
2. 把dev分支也推送到远程
	 git checkout dev
	 git merge master(这样dev分支也是最新的代码了)
	 git push origin dev
~~~

### 再次回到家中，进行代码修改

~~~shell
1.把最新版的master和dev分支都下载(pull)下来。
	git pull origin dev
	git pull origin master
2.接着再循环上述操作，如此循环往复，直到项目完成
~~~

### 在公司约妹子忘记提交代码

又是不知道某一天，在公司开发代码，出现了一些意外。。。

~~~shell
1.拉代码
	git pull origin dev
	
2.继续开发(在公司电脑dev分支下修改a1.py文件，新增文字：功能完成50%)

3.提交代码
	git add .
	git commit -m'xx'
	
注：忘记push了
~~~

### 回家继续写代码(这下记得上传代码了)

家里的代码不是最新的，在公司的代码又忘记上传到百度云上了，只能暂时在旧版本的代码基础上继续开发了。

~~~shell
1. 拉代码，发现在公司写的代码忘记提交....
	 git pull origin dev(这个下载下来的代码不是最新的，里面的a1.py文件里面没有内容的)
	 
2. 继续开发(即使代码不是最新的)

3.提交代码
	git add .
	git commit -m'在旧版本库中在家里开发了其他的功能(修改了a1.py和a2.py)'
	git push origin dev(在家里，头脑清醒，这下记得把代码上传到百度云了) 
~~~

### 到公司继续写代码

~~~shell
1. 拉代码，把晚上在家写的代码拉到本地（有合并、可能产生冲突）
	 你在公司修改了a1.py,你在家修改了a1.py和a2.py
	 那么这2个a1.py进行合并就可能产生冲突
	 git pull origin dev
	 
2. 如果有冲突，手动解决冲突

3. 继续开发其他功能

4. 把dev分支也推送到远程(解决冲突之后的dev分支)
	 git add .
	 git commit -m'xx'
	 git push origin dev
~~~

![](Git入门-视频/59.png)

> 如果你想上线的话，再执行**开发完毕，要上线**里面的代码即可。

### 分享2个命令

~~~shell
git pull origin dev

等价于下面的2个命令(但是一般情况下不用下面的这2个命令，因为毕竟上面的更简单。)

git fetch origin dev
git merge origin/dev
~~~

> 我试了一下，下面的2个分支好像要在master分支下执行才行。

![](Git入门-视频/60.png)

### rebase(变基)的作用

#### 应用场景1

rebase可以保持提交记录简洁，不分叉。

![](Git入门-视频/61.png)

* 第一种：老板给你一段初始代码C1，要你在一周的时间在这个代码的基础上开发一个新的功能，你每天写一点，每天都`git add .`、 `git commit-m''`、`git push`一下，然后最终开发完成，代码为C8。这些提交记录对你来说可能是重要的，但是对老板来说，他只关心结果，不关心过程，所以老板只关心初始代码C1和开发完成的代码C8，中间的代码C2-C7他不管的。

* 所以如果你每天修改一次代码就提交一次，那么你的记录就会变得非常非常多。而`rebase`可以帮助你把你的多个提交记录整合为一个提交记录

* **从当前最新版本找到包括这条记录在内的前3条记录给它进行合并**

  [git rebase -i HEAD~3合并多个提交为一个提交](https://www.cnblogs.com/zndxall/p/14087020.html)

  ~~~shell
  git rebase -i HEAD~3
  ~~~

* 后面会自动打开VIM编辑器，对其进行修改。

  ![](Git入门-视频/63.png)

  ![](Git入门-视频/64.png)

* 注意：如果某个记录已经提交到远程仓库了，那么你就最好不要对它进行提交合并了。

* 尽量合并那些还没有提交到版本库的提交记录。

#### 应用场景2

> 这个我用的很少，所以印象并不深刻。

有2个分支，master分支和dev分支。2个分支里面的版本控制图如下：

![](Git入门-视频/62.png)

如果你不想要这个分叉(让提交记录归并到一条) ，就可以利用rebase来做。

![](Git入门-视频/65.png)

#### 应用场景3

> 忘记提交代码了。

* `git pull`会产生分叉，我们使用`git fetch`就不会产生分叉了。

* 原来写法：

  ~~~git
  git pull origin dev
  ~~~

*  现在写法

  ~~~git
   git fetch origin dev
   git rebase origin/dev
  ~~~

### 快速解决冲突

* 安装beyond compare

* 在git中配置

  ~~~git
  git config --local merge.tool bc3
  git config --local mergetool.path 'D:\01-software\45-beyondcompare\Beyond Compare 4'
  git config --local mergetool.keepBackup false
  ~~~

*  应用beyond compare 

  ~~~git
  git mergetool
  ~~~

## 小总结

* 添加远程连接(别名)

  ~~~git
  git remote add origin 地址
  ~~~

* 推送代码

  ~~~git
  git push origin dev
  ~~~

*  下载代码

  ~~~git 
  git clone 代码地址
  ~~~

*  拉取代码

  ~~~git 
  git pull origin dev
  等价于
  git fetch origin dev
  git merge origin/dev
  ~~~

*  保持代码提交整洁(变基)

  ~~~git
  git rebase 分支
  ~~~

*  记录图形展示

  ~~~javascript
  git log --graph --pretty=format:"%h %s"
  ~~~

## 第六阶段：多人协同开发工作流



